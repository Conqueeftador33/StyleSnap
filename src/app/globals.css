
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* === Base HSL Tokens (Light Theme) === */
    --background-h: 225; --background-s: 60%; --background-l: 94%;
    --foreground-h: 230; --foreground-s: 30%; --foreground-l: 25%;
    --card-h: 0; --card-s: 0%; --card-l: 100%;
    --card-foreground-h: 230; --card-foreground-s: 30%; --card-foreground-l: 20%;
    --popover-h: 0; --popover-s: 0%; --popover-l: 100%;
    --popover-foreground-h: 230; --popover-foreground-s: 30%; --popover-foreground-l: 20%;
    
    --primary-h: 220; --primary-s: 45%; --primary-l: 30%; /* Navy Blue */
    --primary-foreground-h: 210; --primary-foreground-s: 40%; --primary-foreground-l: 95%; /* Light text for contrast */
    
    --secondary-h: 225; --secondary-s: 50%; --secondary-l: 88%;
    --secondary-foreground-h: 230; --secondary-foreground-s: 30%; --secondary-foreground-l: 30%;
    --muted-h: 225; --muted-s: 55%; --muted-l: 92%;
    --muted-foreground-h: 230; --muted-foreground-s: 30%; --muted-foreground-l: 45%;
    --accent-h: 45; --accent-s: 90%; --accent-l: 60%;
    --accent-foreground-h: 40; --accent-s: 30%; --accent-foreground-l: 15%;
    --destructive-h: 0; --destructive-s: 70%; --destructive-l: 50%;
    --destructive-foreground-h: 0; --destructive-s: 0%; --destructive-foreground-l: 100%;
    --border-h: 225; --border-s: 40%; --border-l: 85%;
    --input-h: 225; --input-s: 70%; --input-l: 97%;
    
    --ring-h: var(--primary-h); --ring-s: var(--primary-s); --ring-l: calc(var(--primary-l) + 10%);

    /* === Derived Light Colors === */
    --background: hsl(var(--background-h) var(--background-s) var(--background-l));
    --foreground: hsl(var(--foreground-h) var(--foreground-s) var(--foreground-l));
    --card: hsl(var(--card-h) var(--card-s) var(--card-l));
    --card-foreground: hsl(var(--card-foreground-h) var(--card-foreground-s) var(--card-foreground-l));
    --popover: hsl(var(--popover-h) var(--popover-s) var(--popover-l));
    --popover-foreground: hsl(var(--popover-foreground-h) var(--popover-foreground-s) var(--popover-foreground-l));
    --primary: hsl(var(--primary-h) var(--primary-s) var(--primary-l));
    --primary-foreground: hsl(var(--primary-foreground-h) var(--primary-foreground-s) var(--primary-foreground-l));
    --secondary: hsl(var(--secondary-h) var(--secondary-s) var(--secondary-l));
    --secondary-foreground: hsl(var(--secondary-foreground-h) var(--secondary-foreground-s) var(--secondary-foreground-l));
    --muted: hsl(var(--muted-h) var(--muted-s) var(--muted-l));
    --muted-foreground: hsl(var(--muted-foreground-h) var(--muted-foreground-s) var(--muted-foreground-l));
    --accent: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    --accent-foreground: hsl(var(--accent-foreground-h) var(--accent-foreground-s) var(--accent-foreground-l));
    --destructive: hsl(var(--destructive-h) var(--destructive-s) var(--destructive-l));
    --destructive-foreground: hsl(var(--destructive-foreground-h) var(--destructive-foreground-s) var(--destructive-foreground-l));
    --border: hsl(var(--border-h) var(--border-s) var(--border-l));
    --input: hsl(var(--input-h) var(--input-s) var(--input-l));
    --ring: hsl(var(--ring-h) var(--ring-s) var(--ring-l));

    /* === Charts & Patterns === */
    --chart-1: var(--primary);
    --chart-2: var(--accent);
    --chart-3: hsl(225 30% 60%);
    --chart-4: hsl(var(--primary-h) var(--primary-s) calc(var(--primary-l) + 15%));
    --chart-5: hsl(var(--accent-h) calc(var(--accent-s) - 10%) calc(var(--accent-l) + 10%));
    --pattern-line-opacity: 0.25;
    --pattern-tile-size: 40px;
    --radius: 0.5rem;
  }

  .dark {
    /* === Base HSL Tokens (Dark Theme - Overhauled) === */
    --background-h: 220; --background-s: 20%; --background-l: 8%; /* Deeper, cooler dark background */
    --foreground-h: 210; --foreground-s: 25%; --foreground-l: 92%; /* Brighter foreground for readability */
    
    --card-h: 220; --card-s: 20%; --card-l: 12%; /* Slightly lighter card background */
    --card-foreground-h: 210; --card-foreground-s: 25%; --card-foreground-l: 90%;
    
    --popover-h: 220; --popover-s: 20%; --popover-l: 10%; /* Consistent popover */
    --popover-foreground-h: 210; --popover-foreground-s: 25%; --popover-foreground-l: 90%;
    
    --primary-h: 210; --primary-s: 75%; --primary-l: 60%; /* More vibrant blue for primary actions */
    --primary-foreground-h: 220; --primary-foreground-s: 20%; --primary-foreground-l: 10%; /* Dark text on primary buttons */
    
    --secondary-h: 220; --secondary-s: 15%; --secondary-l: 30%; /* Subtler secondary elements */
    --secondary-foreground-h: 210; --secondary-foreground-s: 25%; --secondary-foreground-l: 88%;
    
    --muted-h: 220; --muted-s: 15%; --muted-l: 22%;
    --muted-foreground-h: 210; --muted-foreground-s: 20%; --muted-l: 68%; /* Improved muted text contrast */
    
    --accent-h: 45; --accent-s: 75%; --accent-l: 65%; /* Accent remains noticeable */
    --accent-foreground-h: 40; --accent-foreground-s: 85%; --accent-foreground-l: 10%;
    
    --destructive-h: 0; --destructive-s: 65%; --destructive-l: 58%;
    --destructive-foreground-h: 0; --destructive-foreground-s: 0%; --destructive-foreground-l: 96%;
    
    --border-h: 220; --border-s: 15%; --border-l: 20%; /* Clearer borders */
    --input-h: 220; --input-s: 15%; --input-l: 18%; /* Input background distinct but dark */
    
    --ring-h: var(--primary-h); --ring-s: calc(var(--primary-s) + 5%); --ring-l: calc(var(--primary-l) + 5%);

    /* === Derived Dark Colors === */
    --background: hsl(var(--background-h) var(--background-s) var(--background-l));
    --foreground: hsl(var(--foreground-h) var(--foreground-s) var(--foreground-l));
    --card: hsl(var(--card-h) var(--card-s) var(--card-l));
    --card-foreground: hsl(var(--card-foreground-h) var(--card-foreground-s) var(--card-foreground-l));
    --popover: hsl(var(--popover-h) var(--popover-s) var(--popover-l));
    --popover-foreground: hsl(var(--popover-foreground-h) var(--popover-foreground-s) var(--popover-foreground-l));
    --primary: hsl(var(--primary-h) var(--primary-s) var(--primary-l));
    --primary-foreground: hsl(var(--primary-foreground-h) var(--primary-foreground-s) var(--primary-foreground-l));
    --secondary: hsl(var(--secondary-h) var(--secondary-s) var(--secondary-l));
    --secondary-foreground: hsl(var(--secondary-foreground-h) var(--secondary-foreground-s) var(--secondary-foreground-l));
    --muted: hsl(var(--muted-h) var(--muted-s) var(--muted-l));
    --muted-foreground: hsl(var(--muted-foreground-h) var(--muted-foreground-s) var(--muted-foreground-l));
    --accent: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    --accent-foreground: hsl(var(--accent-foreground-h) var(--accent-foreground-s) var(--accent-foreground-l));
    --destructive: hsl(var(--destructive-h) var(--destructive-s) var(--destructive-l));
    --destructive-foreground: hsl(var(--destructive-foreground-h) var(--destructive-foreground-s) var(--destructive-foreground-l));
    --border: hsl(var(--border-h) var(--border-s) var(--border-l));
    --input: hsl(var(--input-h) var(--input-s) var(--input-l));
    --ring: hsl(var(--ring-h) var(--ring-s) var(--ring-l));

    --chart-1: hsl(var(--primary-h) var(--primary-s) calc(var(--primary-l) + 5%));
    --chart-2: hsl(var(--accent-h) var(--accent-s) calc(var(--accent-l) + 5%));
    --chart-3: hsl(225 25% 50%);
    --chart-4: hsl(var(--primary-h) calc(var(--primary-s) - 10%) calc(var(--primary-l) + 10%));
    --chart-5: hsl(var(--accent-h) calc(var(--accent-s) - 10%) calc(var(--accent-l) + 10%));
    --pattern-line-opacity: 0.07; /* Reduced opacity for dark mode pattern */
  }

  * {
    @apply border-border;
  }

  body {
    background-color: var(--background);
    background-image:
      linear-gradient(
        hsla(var(--border-h), var(--border-s), var(--border-l), var(--pattern-line-opacity)) 1px,
        transparent 1px
      ),
      linear-gradient(
        90deg,
        hsla(var(--border-h), var(--border-s), var(--border-l), var(--pattern-line-opacity)) 1px,
        transparent 1px
      );
    background-size: var(--pattern-tile-size) var(--pattern-tile-size);
    @apply text-foreground;
  }
}
